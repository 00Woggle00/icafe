<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<title>Packbits</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Packbits";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?cafe/image/compression/packbits/Packbits.html" target="_top">Frames</a></li>
<li><a href="Packbits.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">cafe.image.compression.packbits</div>
<h2 title="Class Packbits" class="title">Class Packbits</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>cafe.image.compression.packbits.Packbits</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Packbits</span>
extends java.lang.Object</pre>
<div class="block">Packbits compression utility class.<p>
 Contains both unpack and packing method for the Macintosh Packbits compression standard.<p>
 Contains Variation for 16 bit RLE packing used in PICT files.<p>
 Contains a main() method with some test code for the pack unpack methods.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Revision: 1.1.1.1 $</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Robin Luiten</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#Packbits()">Packbits</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#getAllRuns(byte[])">getAllRuns</a></strong>(byte[]&nbsp;inb)</code>
<div class="block">Calculate length of every byte run in the input buffer
 and store into runb[] buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#packbits(byte[],%20byte[])">packbits</a></strong>(byte[]&nbsp;inb,
        byte[]&nbsp;outb)</code>
<div class="block">Compress input buffer using RLE packbits compression.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#unpackbits(byte[],%20byte[])">unpackbits</a></strong>(byte[]&nbsp;inb,
          byte[]&nbsp;outb)</code>
<div class="block">Decompress an RLE compressed buffer of bytes as per format as
 described in source or in a document on TIFF packbits compression.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#unpackbits(byte[],%20int[])">unpackbits</a></strong>(byte[]&nbsp;inb,
          int[]&nbsp;outb)</code>
<div class="block">Variation for 16 bit RLE packing used in PICT files.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#unpackbits(byte[],%20int,%20byte[],%20int,%20int)">unpackbits</a></strong>(byte[]&nbsp;inb,
          int&nbsp;ini,
          byte[]&nbsp;outb,
          int&nbsp;outi,
          int&nbsp;len)</code>
<div class="block">More general.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#unpackbits(java.io.DataInputStream,%20byte[])">unpackbits</a></strong>(java.io.DataInputStream&nbsp;in,
          byte[]&nbsp;outb)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../cafe/image/compression/packbits/Packbits.html#unpackbitsLimit(byte[],%20int,%20byte[])">unpackbitsLimit</a></strong>(byte[]&nbsp;inb,
               int&nbsp;inbLen,
               byte[]&nbsp;outb)</code>
<div class="block">Variation for PICT - which provides short inb[] for a give outb[]
 This method when it exhausts input byte buffer it clears the remainder
 of the output buffer oub.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Packbits()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Packbits</h4>
<pre>public&nbsp;Packbits()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="unpackbits(byte[], int, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unpackbits</h4>
<pre>public static&nbsp;void&nbsp;unpackbits(byte[]&nbsp;inb,
              int&nbsp;ini,
              byte[]&nbsp;outb,
              int&nbsp;outi,
              int&nbsp;len)</pre>
<div class="block">More general. [ not really required so unimplemented at the moment.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inb</code> - input buffer</dd><dd><code>ini</code> - where compressed data in input buffer starts</dd><dd><code>outb</code> - start output index</dd><dd><code>outi</code> - where to uncompress data to in output buffer</dd><dd><code>len</code> - length of the data after decompression.</dd></dl>
</li>
</ul>
<a name="unpackbitsLimit(byte[], int, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unpackbitsLimit</h4>
<pre>public static&nbsp;void&nbsp;unpackbitsLimit(byte[]&nbsp;inb,
                   int&nbsp;inbLen,
                   byte[]&nbsp;outb)
                            throws java.lang.ArrayStoreException,
                                   java.lang.ArrayIndexOutOfBoundsException</pre>
<div class="block">Variation for PICT - which provides short inb[] for a give outb[]
 This method when it exhausts input byte buffer it clears the remainder
 of the output buffer oub.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ArrayStoreException</code></dd>
<dd><code>java.lang.ArrayIndexOutOfBoundsException</code></dd></dl>
</li>
</ul>
<a name="unpackbits(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unpackbits</h4>
<pre>public static&nbsp;void&nbsp;unpackbits(byte[]&nbsp;inb,
              byte[]&nbsp;outb)
                       throws java.lang.ArrayStoreException,
                              java.lang.ArrayIndexOutOfBoundsException</pre>
<div class="block">Decompress an RLE compressed buffer of bytes as per format as
 described in source or in a document on TIFF packbits compression.

 Worst case for compression is that for every 128 bytes to
 compress 1 extra byte is required to encode as a copy run.
 therefore the input buffer should be large enough to accomodate
 the worst case compression to the output buffer.

 Throws ArrayStoreException if the array is not large enough for the
 unpacked data, which could be caused by corrupt input data or
 the array not be allocated large enough.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inb</code> - input buffer with compressed data</dd><dd><code>outb</code> - output buffer for decompressed data
 the length of the output buffer must be exact decompressed
 lenght of compressed input.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ArrayStoreException</code></dd>
<dd><code>java.lang.ArrayIndexOutOfBoundsException</code></dd></dl>
</li>
</ul>
<a name="unpackbits(byte[], int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unpackbits</h4>
<pre>public static&nbsp;void&nbsp;unpackbits(byte[]&nbsp;inb,
              int[]&nbsp;outb)
                       throws java.lang.ArrayStoreException,
                              java.lang.ArrayIndexOutOfBoundsException</pre>
<div class="block">Variation for 16 bit RLE packing used in PICT files.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ArrayStoreException</code></dd>
<dd><code>java.lang.ArrayIndexOutOfBoundsException</code></dd></dl>
</li>
</ul>
<a name="unpackbits(java.io.DataInputStream, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unpackbits</h4>
<pre>public static&nbsp;void&nbsp;unpackbits(java.io.DataInputStream&nbsp;in,
              byte[]&nbsp;outb)
                       throws java.lang.ArrayStoreException,
                              java.lang.ArrayIndexOutOfBoundsException,
                              java.io.IOException</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>in</code> - data input stream to read packbits data stream from</dd><dd><code>outb</code> - byte buffer to place unpacked byte data to.
 It is assumed that unpackbits is called with outb big enough
 for a single sequence of compressed bytes</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ArrayStoreException</code></dd>
<dd><code>java.lang.ArrayIndexOutOfBoundsException</code></dd>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="getAllRuns(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllRuns</h4>
<pre>public static&nbsp;int&nbsp;getAllRuns(byte[]&nbsp;inb)</pre>
<div class="block">Calculate length of every byte run in the input buffer
 and store into runb[] buffer. Note that the count - 1
 value is stored so data stored ranges from 0 to 127 which
 represents the values 1 to 128.
 e.g
 INPUT:  03 04 05 05 06 07 08 09 09 09
 OUTPUT: 00 00 01 00 00 00 02
 Note that a runlength of > 128 bytes is encoded as
 multiple runs of 128 bytes.
 Writing byte value of 128 into a byte array in java
 actually casts it to a signed value of -128.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inb</code> - raw data to calculate byte runs on</dd>
<dt><span class="strong">Returns:</span></dt><dd>output to contain length of each byte run
                                this buffer must be as long as input buffer
                                to handle worst case.</dd></dl>
</li>
</ul>
<a name="packbits(byte[], byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>packbits</h4>
<pre>public static&nbsp;int&nbsp;packbits(byte[]&nbsp;inb,
           byte[]&nbsp;outb)
                    throws java.lang.ArrayStoreException,
                           java.lang.ArrayIndexOutOfBoundsException</pre>
<div class="block">Compress input buffer using RLE packbits compression.

 The second part
 of the code passes through the output compressed bytes and converts
 any 2 by replicate runs which are between literal runs into a
 literal run.. [ shit cant do if literal gets > 128 then i have
 start inserting bytes what a suck... ]</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>inb</code> - input buffer containing bytes to be compressed
                                using RLE packbits algorithm. buffer is assumed
                                to be completely filled.</dd><dd><code>outb</code> - output buffer containing compressed data.
                                This must be large enough for worst case compression
                                of input buffer. [ worst case is 1 additional byte
                                for every 128 bytes of input buffer with a minimum
                                size of 2 bytes ]</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bytes in the output buffer.
                        It should not be possible to return a value < 2.

 <pre>
 Example Input buffer.
   03 04 05 05 06 07 08
 Example Stoopid encoding
   01 03 04 -01 05 02 06 07 08
 Example Proper encoding
   06 03 04 05 05 06 07 08
 </pre></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ArrayStoreException</code></dd>
<dd><code>java.lang.ArrayIndexOutOfBoundsException</code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?cafe/image/compression/packbits/Packbits.html" target="_top">Frames</a></li>
<li><a href="Packbits.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
